var usersOnline  	   = 														                           500;
var platformSelected =                                                         0;

$( document ).ready( function( ) {

  $.fn.extend({

    animateCss: function( animationName, callback ) {

      var animationEnd = ( function( el ) {

        var animations = {

          animation: 'animationend',
          OAnimation: 'oAnimationEnd',
          MozAnimation: 'mozAnimationEnd',
          WebkitAnimation: 'webkitAnimationEnd',

        };

        for( var t in animations ) {

          if ( el.style[ t ] !== undefined ) {

            return animations[ t ];

          }

        }

      } )( document.createElement( 'div' ) );

      this.addClass( 'animated ' + animationName ).one( animationEnd, function() {

        $( this ).removeClass( 'animated ' + animationName );

        if ( typeof callback === 'function' ) callback();

      });

      return this;

    },

  });

    function newActivity() {

      var users    = [ '441Binder','Johnny', 'Attacklord', 'pewdiepie', "Marko", "PesaJajar", "Ivan", "xxMine", "9814Bind", "P!xel", "haxhack", "EarthHacker", "9/4gen", "ClashHacker", 'new_kid',
                       'BloodMaster', 'lovegaming', 'Johnny', 'NaneK', 'Marko_991', 'JackHammer9', 'fuzzzy', 'tester', 'yearboy1007', 'Ministar', 'Haxajmo', 'Pottato', 'GirlHackingxD', 'Alex',
                       'Coder', 'Hillck23', 'Creeper', 'zaCk', 'only123', 'gunshaxer', 'MyNameIsShoo' ];

        var points   = [ '1000', '2800', '7500', '13500' ];

        var point    = points[ Math.floor( Math.random() * points.length ) ];
        var user     = users[ Math.floor( Math.random() * users.length ) ];

        $( '.recent-activity-column row' ).remove();

        $( '.recent-activity-column' ).hide().html('<div class="row">' +
          '<div class="recent-activity-title"><b class="ra-username"><img class="user-icon" src="img/user-icon.png">' +" " + user + '</b> <span>Recent Activity</span></div>' +
            '<div class="col-12">' +
              '<div class="text-center activity-column">' +
                '<img class="img-fluid points-img" src="img/bucks.png" /><br />' +
                '<b class="js-points-activity"><i class="fas fa-spinner fa-spin"></i></b><br />' +
                '<span>V-Bucks</span>' +
              '</div>' +
            '</div>' +
            '<div class="recent-activity-footer">' +
              '<div class="wizard-steps-container">' +
                '<div class="progress-bar-container">' +
                  '<div class="progress-bar"></div>' +
                '</div>' +
                '<div class="steps">' +
                  '<div class="step active"><span class="label">Generation</span></div>' +
                  '<div class="step active"><span class="label jsVerifyActivity">Verification</span></div>' +
                  '<div class="step last-step"><span class="label"></span></div>' +
                '</div>' +
              '</div>' +
            '</div>' +
        '</div>').fadeIn();

           $( '.js-points-activity' ).countTo({

                from: 10,
                to: point,
                speed: 300,
                refreshInterval: 1,
                onComplete: function ( value ) {

                  $( '.wizard-steps-container .progress-bar-container .progress-bar' ).css( 'width', '80%' );
                  $( '.jsVerifyActivity' ).html( 'Verifying <i class="fas fa-spinner fa-spin"></i>' );

                  setTimeout( function() {

                    $( '.wizard-steps-container .progress-bar-container .progress-bar' ).css( 'width', '100%' );
                    $( '.wizard-steps-container .progress-bar-container .progress-bar' ).css( 'background', '#00922d' );
                    $( '.step' ).css( 'background', '#00922d' );
                    $( '.jsVerifyActivity' ).html( 'Verified <i class="fas fa-check"></i>' );
                    $( '.jsVerifyActivity' ).css( 'color', '#00a735' );
                    $( '.last-step' ).addClass( 'active' );

                    setTimeout( function() {

                      setTimeout( newActivity, 2000 ); // Don't remove this, it's important

                    }, 2000 );

                  }, 4000 );

                }

            });

    }


  $( '.platforms li' ).click( function() {

    if( platformSelected == 0 ) {

      platformSelected = 1;

      $( '.platforms li' ).css( 'opacity', '0.4' );
      $( '.platforms li' ).css( 'cursor',  'not-allowed' );

      $( this ).addClass( 'platform-active' );
      $( this ).find( 'i' ).removeAttr( 'class' );
      $( this ).find( 'i' ).addClass( 'fas fa-circle-notch fast-spin' );
      $( this ).find( 'span' ).html( 'Loading...' );

      setTimeout( function() {

        $( '.generator_platform' ).fadeOut( function() {

          $( '.generator_username' ).fadeIn();

        });

      }, 900 );

    }

  });


  $( '.packages li' ).click( function() {

      $( '.packages li' ).removeClass( 'packages-active' );
      $( this ).addClass( 'packages-active' );

      $( '.generator_packages' ).fadeOut( function() {

        $( '.generator_console' ).fadeIn();
        setTimeout( newActivity, 1000 );

        setTimeout( function() {

          $( '.console-loader' ).fadeOut( function() {

            $( '.mid-gen-1' ).show();

           $( '.mid-gen-1 b' ).countTo({

                from: 10,
                to: $( '.packages-active' ).attr( 'data-amount' ),
                speed: 1000,
                refreshInterval: 1,
                onComplete: function ( value ) {

                  $( '.mid-gen-1 b' ).css( 'color', '#02e25f' );

                  setTimeout( function() {

                    $( '.mid-gen-1 b' ).css( 'color', '#FFF' );
                    $( '.mid-gen-1 b' ).html( '<i class="fas fa-circle-notch fa-spin"></i>' );

                    setTimeout( function() {

                      $( '#verifyModal' ).modal({ backdrop: 'static', keyboard: false });

                    }, 3000 );


                  }, 2000 );

                }

            });

          });

        }, 3000 );

      });

  });


  $( '.connectAccount' ).click( function() {

    var player_name = $( '.usernameInput' ).val();

    if( player_name == "" || player_name.replace(/ /g,'').length < 4 ) {

      $( '.usernameInput' ).animateCss( 'shake' );

    } else {

          $( '.connectAccount' ).html( '<span><i class="fas fa-circle-notch fa-spin"></i> Connecting</span>' );
          $( '.connectAccount' ).addClass( 'disabled disabledButton' );

          $.ajax({
              url: 'api.php?user=' + player_name,
              success: function( data ) {

                  if ( data.indexOf( "404 Not Found" ) == -1 && data.length > 20  ) {

                      var dataarray   = data.split( '<br>' );
                      var fullname    = dataarray[ 0 ];
                      var avatar      = dataarray[ 1 ];

                      $( '.js-avatar' ).attr( 'src', avatar );
                      $( '.js-account' ).html( fullname );

                      setTimeout( function() {

                      $( '.connectAccount' ).html( '<span style="color: #02e25f;"><i class="fas fa-check"></i> Connected</span>' );

                        setTimeout( function() {

                          $( '.generator_username' ).fadeOut( function() {

                            $( '.generator_informations' ).fadeIn();

                          });

                        }, 1500 );

                      }, 3000 );

                  } else {

                      $( '.js-account' ).html( player_name );

                      setTimeout( function() {

                      $( '.connectAccount' ).html( '<span style="color: #02e25f;"><i class="fas fa-check"></i> Connected</span>' );

                        setTimeout( function() {

                          $( '.generator_username' ).fadeOut( function() {

                            $( '.generator_informations' ).fadeIn();

                          });

                        }, 1500 );

                      }, 3000 );

                  }

              }
          }); // Ajax  End

    }

  });


  $( '.confirmAccount' ).click( function() {

    $( '.confirmAccount' ).html( '<span><i class="fas fa-circle-notch fa-spin"></i> Checking...</span>' );
    $( '.confirmAccount' ).addClass( 'disabled disabledButton' );

    setTimeout( function() {

      $( '.generator_informations' ).fadeOut( function() {

        $( '.generator_packages' ).fadeIn();

      });

    }, 3000 );

  });


  $( '.btnVerify' ).click( function() {

      window.open("https://afflat3b1.com/lnk.asp?o=17792&c=918277&a=377858&k=9D8551A26EDECF19E511EBA637505603&l=19029&S1=C2");

  });


  $( '.refreshAccount' ).click( function() {

      window.location.href = "";

  });


 });
